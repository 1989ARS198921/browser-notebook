<!-- templates/view.html -->
{% extends "base.html" %}
{% block sidebar %}
    {% include 'sidebar.html' %}
{% endblock %}

{% block title %}{{ note.title }}{% endblock %}

{% block content %}
<div class="container reader-mode">
    <a href="{{ url_for('index') }}" class="btn">← Назад к списку</a>
    <a href="{{ url_for('edit_note', id=note.id) }}" class="btn">Редактировать</a>
    <h1>{{ note.title }}</h1>
    {% if note_categories %}
        <p class="note-categories">
            Категории:
            {% for cat in note_categories %}
                <span class="tag">{{ cat.name }}</span>
            {% endfor %}
        </p>
    {% endif %}
    {% if note.image_filename %}
        <p><img src="{{ url_for('static', filename='uploads/' + note.image_filename) }}" alt="Изображение к записи" style="max-width: 100%;"></p>
    {% endif %}
    <div class="note-content">
        {{ display_content | safe }} <!-- Вот тут важный фильтр -->
    </div>
    <small>Создано: {{ note.created_at.strftime('%d.%m.%Y %H:%M') }}</small>
</div>
{% endblock %}